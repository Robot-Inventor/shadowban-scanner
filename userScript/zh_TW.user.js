// ==UserScript==
// @name         Shadowban Scanner (中文（台灣）)
// @namespace    https://github.com/Robot-Inventor/shadowban-scanner/
// @version      2.2.0
// @description  這是一個用於檢測Twitter的Shadowban的擴充功能。
// @author       Robot-Inventor (ろぼいん / @keita_roboin)
// @match        https://twitter.com/*
// @match        https://mobile.twitter.com/*
// @match        https://tweetdeck.twitter.com/*
// @icon         https://raw.githubusercontent.com/Robot-Inventor/shadowban-scanner/main/src/image/icon128.png
// @downloadURL  https://raw.githubusercontent.com/Robot-Inventor/shadowban-scanner/main/userScript/zh_TW.user.js
// @updateURL    https://raw.githubusercontent.com/Robot-Inventor/shadowban-scanner/main/userScript/zh_TW.user.js
// @grant        none
// ==/UserScript==

(()=>{"use strict";var e={1402:(e,t,n)=>{n.d(t,{Z:()=>a});var s=n(8081),r=n.n(s),o=n(3645),i=n.n(o)()(r());i.push([e.id,".shadowban-scanner-message {\n    --message-background-color: rgb(255, 0, 0, 0.2);\n\n    padding: 1em;\n    border-radius: 0.5em;\n    background: var(--message-background-color);\n    margin: 1em 0 0 0;\n    font-family: sans-serif;\n}\n\n.shadowban-scanner-message.focal-mode {\n    margin: 0 0 1em 0;\n}\n\n.shadowban-scanner-message .twemoji {\n    height: 1em;\n    width: 1em;\n    margin-right: 0.25em;\n    vertical-align: middle;\n}\n\n.shadowban-scanner-message-no-problem {\n    --message-background-color: rgb(0, 255, 0, 0.2);\n}\n\n.shadowban-scanner-message button {\n    cursor: pointer;\n    color: inherit;\n    border: none;\n    background: none;\n}\n\n.shadowban-scanner-message .shadowban-scanner-collapsed-content {\n    display: none;\n}\n\n.shadowban-scanner-message ul {\n    font-family: inherit;\n    line-height: inherit;\n    margin: 0.75rem 0 0 0;\n    padding: 0;\n}\n\n.shadowban-scanner-message ul li {\n    list-style: none;\n}\n\n.shadowban-scanner-message-note {\n    opacity: 0.8;\n    font-size: 0.8em;\n    margin-top: 0.75em;\n}\n\n.shadowban-scanner-message-note + .shadowban-scanner-message-note {\n    margin-top: 0.5em;\n}\n\n.shadowban-scanner-message-note a {\n    color: inherit;\n}\n\n.shadowban-scanner-message md-filled-button {\n    margin-top: 0.5em;\n    width: 100%;\n    --md-filled-button-container-color: var(--message-background-color);\n    --md-ripple-hover-color: white;\n    --md-ripple-pressed-color: white;\n    --_container-shadow-color: rgba(0, 0, 0, 0.3);\n}\n\n[data-sb-translation] {\n    display: inline-block;\n    min-width: 15em;\n    min-height: 1em;\n    border-radius: 0.25em;\n    background-image: linear-gradient(90deg, transparent 40%, rgba(175, 175, 175, 0.7) 80%, transparent 100%);\n    background-size: 200% 100%;\n    animation: loading-animation 1.5s linear infinite;\n}\n\n@keyframes loading-animation {\n    0% {\n        background-position: 200% 0%;\n        opacity: 1;\n    }\n    100% {\n        background-position: 0% 0%;\n        opacity: 1;\n    }\n}\n",""]);const a=i},3645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",s=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),s&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),s&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,s,r,o){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(s)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(i[c]=!0)}for(var l=0;l<e.length;l++){var p=[].concat(e[l]);s&&i[p[0]]||(void 0!==o&&(void 0===p[5]||(p[1]="@layer".concat(p[5].length>0?" ".concat(p[5]):""," {").concat(p[1],"}")),p[5]=o),n&&(p[2]?(p[1]="@media ".concat(p[2]," {").concat(p[1],"}"),p[2]=n):p[2]=n),r&&(p[4]?(p[1]="@supports (".concat(p[4],") {").concat(p[1],"}"),p[4]=r):p[4]="".concat(r)),t.push(p))}},t}},8081:e=>{e.exports=function(e){return e[1]}},6962:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var s=n(3379),r=n.n(s),o=n(7795),i=n.n(o),a=n(569),c=n.n(a),l=n(3565),p=n.n(l),d=n(9216),h=n.n(d),u=n(4589),m=n.n(u),w=n(1402),b={};b.styleTagTransform=m(),b.setAttributes=p(),b.insert=c().bind(null,"head"),b.domAPI=i(),b.insertStyleElement=h(),r()(w.Z,b);const f=w.Z&&w.Z.locals?w.Z.locals:void 0},3379:e=>{var t=[];function n(e){for(var n=-1,s=0;s<t.length;s++)if(t[s].identifier===e){n=s;break}return n}function s(e,s){for(var o={},i=[],a=0;a<e.length;a++){var c=e[a],l=s.base?c[0]+s.base:c[0],p=o[l]||0,d="".concat(l," ").concat(p);o[l]=p+1;var h=n(d),u={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==h)t[h].references++,t[h].updater(u);else{var m=r(u,s);s.byIndex=a,t.splice(a,0,{identifier:d,updater:m,references:1})}i.push(d)}return i}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var o=s(e=e||[],r=r||{});return function(e){e=e||[];for(var i=0;i<o.length;i++){var a=n(o[i]);t[a].references--}for(var c=s(e,r),l=0;l<o.length;l++){var p=n(o[l]);0===t[p].references&&(t[p].updater(),t.splice(p,1))}o=c}}},569:e=>{var t={};e.exports=function(e,n){var s=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(n)}},9216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var s="";n.supports&&(s+="@supports (".concat(n.supports,") {")),n.media&&(s+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(s+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),s+=n.css,r&&(s+="}"),n.media&&(s+="}"),n.supports&&(s+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(s,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},8725:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isProfileReactPropsData=t.isFocalTweetOuterReactPropsData=t.isTweetOuterReactPropsData=t.isMenuBarReactPropsData=void 0,t.isMenuBarReactPropsData=function(e){const t=e;return(null!==t&&"object"==typeof t||"function"==typeof t)&&Array.isArray(t.children)&&(null!==t.children[1]&&"object"==typeof t.children[1]||"function"==typeof t.children[1])&&(null!==t.children[1].props&&"object"==typeof t.children[1].props||"function"==typeof t.children[1].props)&&(null!==t.children[1].props.retweetWithCommentLink&&"object"==typeof t.children[1].props.retweetWithCommentLink||"function"==typeof t.children[1].props.retweetWithCommentLink)&&(null!==t.children[1].props.retweetWithCommentLink.state&&"object"==typeof t.children[1].props.retweetWithCommentLink.state||"function"==typeof t.children[1].props.retweetWithCommentLink.state)&&(null!==t.children[1].props.retweetWithCommentLink.state.quotedStatus&&"object"==typeof t.children[1].props.retweetWithCommentLink.state.quotedStatus||"function"==typeof t.children[1].props.retweetWithCommentLink.state.quotedStatus)&&(void 0===t.children[1].props.retweetWithCommentLink.state.quotedStatus.possibly_sensitive||null===t.children[1].props.retweetWithCommentLink.state.quotedStatus.possibly_sensitive||!1===t.children[1].props.retweetWithCommentLink.state.quotedStatus.possibly_sensitive||!0===t.children[1].props.retweetWithCommentLink.state.quotedStatus.possibly_sensitive)&&(void 0===t.children[1].props.retweetWithCommentLink.state.quotedStatus.possibly_sensitive_editable||null===t.children[1].props.retweetWithCommentLink.state.quotedStatus.possibly_sensitive_editable||!1===t.children[1].props.retweetWithCommentLink.state.quotedStatus.possibly_sensitive_editable||!0===t.children[1].props.retweetWithCommentLink.state.quotedStatus.possibly_sensitive_editable)&&"string"==typeof t.children[1].props.retweetWithCommentLink.state.quotedStatus.permalink&&(null!==t.children[1].props.retweetWithCommentLink.state.quotedStatus.user&&"object"==typeof t.children[1].props.retweetWithCommentLink.state.quotedStatus.user||"function"==typeof t.children[1].props.retweetWithCommentLink.state.quotedStatus.user)&&(void 0===t.children[1].props.retweetWithCommentLink.state.quotedStatus.user.possibly_sensitive||null===t.children[1].props.retweetWithCommentLink.state.quotedStatus.user.possibly_sensitive||!1===t.children[1].props.retweetWithCommentLink.state.quotedStatus.user.possibly_sensitive||!0===t.children[1].props.retweetWithCommentLink.state.quotedStatus.user.possibly_sensitive)&&"string"==typeof t.children[1].props.retweetWithCommentLink.state.quotedStatus.user.screen_name&&(""===t.children[1].props.retweetWithCommentLink.state.quotedStatus.user.profile_interstitial_type||"sensitive_media"===t.children[1].props.retweetWithCommentLink.state.quotedStatus.user.profile_interstitial_type||"fake_account"===t.children[1].props.retweetWithCommentLink.state.quotedStatus.user.profile_interstitial_type||"offensive_profile_content"===t.children[1].props.retweetWithCommentLink.state.quotedStatus.user.profile_interstitial_type||"timeout"===t.children[1].props.retweetWithCommentLink.state.quotedStatus.user.profile_interstitial_type)},t.isTweetOuterReactPropsData=function(e){const t=e;return(null!==t&&"object"==typeof t||"function"==typeof t)&&Array.isArray(t.children)&&Array.isArray(t.children[0])&&(null!==t.children[0][1]&&"object"==typeof t.children[0][1]||"function"==typeof t.children[0][1])&&(null!==t.children[0][1].props&&"object"==typeof t.children[0][1].props||"function"==typeof t.children[0][1].props)&&Array.isArray(t.children[0][1].props.children)&&(null!==t.children[0][1].props.children[0]&&"object"==typeof t.children[0][1].props.children[0]||"function"==typeof t.children[0][1].props.children[0])&&(null!==t.children[0][1].props.children[0].props&&"object"==typeof t.children[0][1].props.children[0].props||"function"==typeof t.children[0][1].props.children[0].props)&&Array.isArray(t.children[0][1].props.children[0].props.children)&&(null!==t.children[0][1].props.children[0].props.children[1]&&"object"==typeof t.children[0][1].props.children[0].props.children[1]||"function"==typeof t.children[0][1].props.children[0].props.children[1])&&(null!==t.children[0][1].props.children[0].props.children[1].props&&"object"==typeof t.children[0][1].props.children[0].props.children[1].props||"function"==typeof t.children[0][1].props.children[0].props.children[1].props)&&Array.isArray(t.children[0][1].props.children[0].props.children[1].props.children)&&Array.isArray(t.children[0][1].props.children[0].props.children[1].props.children[1])&&(null!==t.children[0][1].props.children[0].props.children[1].props.children[1][2]&&"object"==typeof t.children[0][1].props.children[0].props.children[1].props.children[1][2]||"function"==typeof t.children[0][1].props.children[0].props.children[1].props.children[1][2])&&(null!==t.children[0][1].props.children[0].props.children[1].props.children[1][2].props&&"object"==typeof t.children[0][1].props.children[0].props.children[1].props.children[1][2].props||"function"==typeof t.children[0][1].props.children[0].props.children[1].props.children[1][2].props)&&(null!==t.children[0][1].props.children[0].props.children[1].props.children[1][2].props.loggedInUser&&"object"==typeof t.children[0][1].props.children[0].props.children[1].props.children[1][2].props.loggedInUser||"function"==typeof t.children[0][1].props.children[0].props.children[1].props.children[1][2].props.loggedInUser)&&"string"==typeof t.children[0][1].props.children[0].props.children[1].props.children[1][2].props.loggedInUser.screen_name},t.isFocalTweetOuterReactPropsData=function(e){const t=e;return(null!==t&&"object"==typeof t||"function"==typeof t)&&Array.isArray(t.children)&&Array.isArray(t.children[0])&&(null!==t.children[0][1]&&"object"==typeof t.children[0][1]||"function"==typeof t.children[0][1])&&(null!==t.children[0][1].props&&"object"==typeof t.children[0][1].props||"function"==typeof t.children[0][1].props)&&Array.isArray(t.children[0][1].props.children)&&(null!==t.children[0][1].props.children[0]&&"object"==typeof t.children[0][1].props.children[0]||"function"==typeof t.children[0][1].props.children[0])&&(null!==t.children[0][1].props.children[0].props&&"object"==typeof t.children[0][1].props.children[0].props||"function"==typeof t.children[0][1].props.children[0].props)&&Array.isArray(t.children[0][1].props.children[0].props.children)&&(null!==t.children[0][1].props.children[0].props.children[2]&&"object"==typeof t.children[0][1].props.children[0].props.children[2]||"function"==typeof t.children[0][1].props.children[0].props.children[2])&&(null!==t.children[0][1].props.children[0].props.children[2].props&&"object"==typeof t.children[0][1].props.children[0].props.children[2].props||"function"==typeof t.children[0][1].props.children[0].props.children[2].props)&&Array.isArray(t.children[0][1].props.children[0].props.children[2].props.children)&&(null!==t.children[0][1].props.children[0].props.children[2].props.children[7]&&"object"==typeof t.children[0][1].props.children[0].props.children[2].props.children[7]||"function"==typeof t.children[0][1].props.children[0].props.children[2].props.children[7])&&(null!==t.children[0][1].props.children[0].props.children[2].props.children[7].props&&"object"==typeof t.children[0][1].props.children[0].props.children[2].props.children[7].props||"function"==typeof t.children[0][1].props.children[0].props.children[2].props.children[7].props)&&(null!==t.children[0][1].props.children[0].props.children[2].props.children[7].props.loggedInUser&&"object"==typeof t.children[0][1].props.children[0].props.children[2].props.children[7].props.loggedInUser||"function"==typeof t.children[0][1].props.children[0].props.children[2].props.children[7].props.loggedInUser)&&"string"==typeof t.children[0][1].props.children[0].props.children[2].props.children[7].props.loggedInUser.screen_name},t.isProfileReactPropsData=function(e){const t=e;return(null!==t&&"object"==typeof t||"function"==typeof t)&&Array.isArray(t.children)&&(null!==t.children[1]&&"object"==typeof t.children[1]||"function"==typeof t.children[1])&&(null!==t.children[1].props&&"object"==typeof t.children[1].props||"function"==typeof t.children[1].props)&&(null!==t.children[1].props.user&&"object"==typeof t.children[1].props.user||"function"==typeof t.children[1].props.user)&&(null===t.children[1].props.user.possibly_sensitive||!1===t.children[1].props.user.possibly_sensitive||!0===t.children[1].props.user.possibly_sensitive)&&(""===t.children[1].props.user.profile_interstitial_type||"sensitive_media"===t.children[1].props.user.profile_interstitial_type||"fake_account"===t.children[1].props.user.profile_interstitial_type||"offensive_profile_content"===t.children[1].props.user.profile_interstitial_type||"timeout"===t.children[1].props.user.profile_interstitial_type)}},3216:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RELEASE_NOTE_URL=t.ONBOARDING_URL=t.ALLOWED_TWEMOJI=t.TWEMOJI_ATTRIBUTE=t.SHADOW_TRANSLATION_ATTRIBUTE=t.TRANSLATION_ATTRIBUTE=t.EVENT_GENERATOR_SETTINGS_ATTRIBUTE=t.EVENT_GENERATOR_ID=t.CHECKED_DATA_ATTRIBUTE=void 0,t.CHECKED_DATA_ATTRIBUTE="data-shadowban-checked",t.EVENT_GENERATOR_ID="shadowban-scanner-event-generator",t.EVENT_GENERATOR_SETTINGS_ATTRIBUTE="data-sb-settings",t.TRANSLATION_ATTRIBUTE="data-sb-translation",t.SHADOW_TRANSLATION_ATTRIBUTE="data-sb-shadow-translation",t.TWEMOJI_ATTRIBUTE="data-sb-enable-twemoji",t.ALLOWED_TWEMOJI=["✅","🚫","⚠️"],t.ONBOARDING_URL={en:"https://github.com/Robot-Inventor/shadowban-scanner/blob/main/README.md",ja:"https://github.com/Robot-Inventor/shadowban-scanner/blob/main/README_ja.md"},t.RELEASE_NOTE_URL={en:"https://robot-inventor.github.io/article/2023/11/10/shadowban-scanner-v2-2-release/en/",ja:"https://robot-inventor.github.io/article/2023/11/10/shadowban-scanner-v2-2-release/"}},2238:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_SETTINGS=void 0,t.DEFAULT_SETTINGS={alwaysDetailedView:!1,enableForOtherUsersProfiles:!0,enableForOtherUsersTweets:!0,showMessagesInUnproblematicProfiles:!0,showMessagesInUnproblematicTweets:!1,showNotesInMessages:!0,showTweetButton:!0}},2983:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Translator=void 0;const s=n(3216);t.Translator=class{constructor(e,t){this.translationFunction=e,this.twemojiEndpoint=t}convertEmojiToTwemoji(e){let t=e;for(const e of s.ALLOWED_TWEMOJI){const n=[...e].map((e=>e.codePointAt(0)?.toString(16))).join("-"),s=`<img src="${new URL(`${n}.svg`,this.twemojiEndpoint).href}" alt="${e}" class="twemoji">`;t=t.replaceAll(e,s)}return t}translateElements(){const e=[...document.querySelectorAll(`[${s.TRANSLATION_ATTRIBUTE}]`)],t=document.querySelectorAll(`sbs-message[${s.SHADOW_TRANSLATION_ATTRIBUTE}]`);for(const n of t){const{shadowRoot:t}=n;if(!t)return;const r=t.querySelectorAll(`[${s.TRANSLATION_ATTRIBUTE}]`);e.push(...r),r.length&&n.removeAttribute(s.SHADOW_TRANSLATION_ATTRIBUTE)}e.forEach((e=>{const t=e.getAttribute(s.TRANSLATION_ATTRIBUTE),n=this.translationFunction(t);e.hasAttribute(s.TWEMOJI_ATTRIBUTE)?e.innerHTML=this.convertEmojiToTwemoji(n):e.innerHTML=n,e.removeAttribute(s.TRANSLATION_ATTRIBUTE)}))}}},8564:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Core=void 0;const s=n(3216),r=n(1186),o=n(4338);t.Core=class{constructor(e,t){this.OBSERVER_OPTIONS={childList:!0,subtree:!0},this.settings=e,this.onMessageCallback=t;const n=new MutationObserver((()=>{this.timelineObserverCallback()})),s=new MutationObserver((()=>{const e=document.querySelector("main");e&&(s.disconnect(),n.observe(e,this.OBSERVER_OPTIONS))}));s.observe(document.body,this.OBSERVER_OPTIONS)}timelineObserverCallback(){const e=document.querySelectorAll(`[data-testid="tweet"]:not([${s.CHECKED_DATA_ATTRIBUTE}]`);for(const t of e)new o.TweetChecker(t,this.settings,this.onMessageCallback).run();const t=document.querySelector(`:not([data-testid="tweet"]) [data-testid="UserName"]:not([${s.CHECKED_DATA_ATTRIBUTE}])`);t&&new r.ProfileChecker(t,this.settings,this.onMessageCallback).run()}}},5629:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MessageSummary=void 0,t.MessageSummary=class{static fromTweetStatus(e){return e.user.possiblySensitive||e.user.sensitiveMediaInProfile||e.tweet.possiblySensitive?e.user.possiblySensitive||e.user.sensitiveMediaInProfile?e.tweet.possiblySensitive?e.tweet.possiblySensitiveEditable?"accountShadowbannedAndTweetFlaggedAsSensitive":"accountAndTweetShadowbanned":"accountShadowbanned":e.tweet.possiblySensitiveEditable?"tweetFlaggedAsSensitive":"tweetShadowbanned":"tweetNoProblem"}static fromAccountStatus(e){return e?"thisUserIsShadowbanned":"thisUserIsNotShadowbanned"}}},1186:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProfileChecker=void 0;const s=n(3216),r=n(5629),o=n(1194),i=n(3736);t.ProfileChecker=class{constructor(e,t,n){this.userName=e,this.options=t,this.onMessageCallback=n}run(){const e=Boolean(document.querySelector("[data-testid='editProfileButton']"));if(!this.options.enableForOtherUsersProfiles&&!e)return;this.userName.setAttribute(s.CHECKED_DATA_ATTRIBUTE,"true");const t=new o.ProfileReactProps(this.userName).get(),n=Boolean(t.user.possibly_sensitive)||Boolean(["sensitive_media","offensive_profile_content"].includes(t.user.profile_interstitial_type));if(!n&&!this.options.showMessagesInUnproblematicProfiles)return;const a=new i.SbsMessageWrapper({isAlert:n,onRenderedCallback:this.onMessageCallback,summary:r.MessageSummary.fromAccountStatus(n),type:"profile"}),c=document.querySelector("[data-testid='UserDescription']")||document.querySelector("[data-testid='UserName']");if(!c)throw new Error("Failed to get user description of profile");a.insertAdjacentElement(c,"afterend")}}},1194:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProfileReactProps=void 0;const s=n(7036),r=n(8725);t.ProfileReactProps=class{constructor(e){this.userName=e}get(){const e=new s.ReactProps(this.userName).get();if(!(0,r.isProfileReactPropsData)(e))throw new Error("Type of reactProps is invalid.");return e.children[1].props}}},7036:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ReactProps=void 0,t.ReactProps=class{constructor(e){this.element=e,[this.reactPropsName]=Object.getOwnPropertyNames(e).filter((e=>e.startsWith("__reactProps$")))}get(){return this.element[this.reactPropsName]}}},2878:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TweetReactProps=void 0;const s=n(8725),r=n(7036);t.TweetReactProps=class{constructor(e,t){this.tweet=e;const n=new r.ReactProps(t).get();if(!(0,s.isMenuBarReactPropsData)(n))throw new Error("Type of basicTweetProps is invalid.");this.basicTweetProps=n.children[1].props.retweetWithCommentLink.state.quotedStatus}get(){const e=this.basicTweetProps;return{tweet:{isTweetByCurrentUser:this.isTweetByCurrentUser,possiblySensitive:Boolean(e.possibly_sensitive),possiblySensitiveEditable:!(!1===e.possibly_sensitive_editable),tweetPermalink:e.permalink},user:{possiblySensitive:Boolean(e.user.possibly_sensitive),sensitiveMediaInProfile:["sensitive_media","offensive_profile_content"].includes(e.user.profile_interstitial_type)}}}get isTweetByCurrentUser(){const e=this.basicTweetProps.user.screen_name,t=new r.ReactProps(this.tweet).get();let n="";if((0,s.isTweetOuterReactPropsData)(t))n=t.children[0][1].props.children[0].props.children[1].props.children[1][2].props.loggedInUser.screen_name;else{if(!(0,s.isFocalTweetOuterReactPropsData)(t))throw new Error("Type of tweetReactProps is invalid.");n=t.children[0][1].props.children[0].props.children[2].props.children[7].props.loggedInUser.screen_name}return e===n}get isFocal(){const e=new r.ReactProps(this.tweet).get();return(0,s.isFocalTweetOuterReactPropsData)(e)}}},3736:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SbsMessageWrapper=void 0;const s=n(3216),r=n(4937);class o{constructor(e){const t=document.createElement("sbs-message");t.summary=e.summary,t.isAlert=e.isAlert,t.onRenderedCallback=e.onRenderedCallback,"tweet"===e.type?(t.details=e.details,t.notes=e.notes,t.isFocalMode=e.isFocalMode,t.isExpanded=e.isExpanded,t.isTweetButtonShown=e.isTweetButtonShown,t.isNoteShown=e.isNoteShown,this.sourceTweet=e.sourceTweet,this.sourceTweetPermalink=e.sourceTweetPermalink,this.tweetText=e.tweetText):t.isExpanded=!0,t.setAttribute(s.SHADOW_TRANSLATION_ATTRIBUTE,""),t.addEventListener("tweetButtonClick",this.onTweetButtonClick.bind(this)),this.sbsMessage=t}static async clickRetweetButton(e){(await(0,r.asyncQuerySelector)("[data-testid='unretweet'], [data-testid='retweet']",e)).click()}static async clickQuoteButton(){(await(0,r.asyncQuerySelector)(["[data-testid='Dropdown'] [href='/compose/tweet']","[data-testid='sheetDialog'] [href='/compose/tweet']"].join(","))).click()}static async getTweetTextBox(){const e=await(0,r.asyncQuerySelector)("[data-viewportview='true'] [data-text='true'], textarea[data-testid='tweetTextarea_0']"),t="TEXTAREA"===e.tagName?e:e.parentElement;if(!t)throw new Error("Failed to get text box of tweet");return t}static async quoteTweet(e,t,n){try{await o.clickRetweetButton(e),await o.clickQuoteButton();const t=await o.getTweetTextBox();t.innerHTML=n,t.dispatchEvent(new Event("input",{bubbles:!0}))}catch(e){open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(`${n}\nhttps://twitter.com${t}`)}`,"_blank")}}onTweetButtonClick(){if(!this.sourceTweet||!this.sourceTweetPermalink||!this.tweetText)throw new Error("Tweet button clicked without source tweet");o.quoteTweet(this.sourceTweet,this.sourceTweetPermalink,this.tweetText)}insertAdjacentElement(e,t){e.insertAdjacentElement(t,this.sbsMessage)}}t.SbsMessageWrapper=o},4338:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TweetChecker=void 0;const s=n(5629),r=n(3216),o=n(3736),i=n(2878);class a{constructor(e,t,n){this.tweet=e,this.options=t,this.onMessageCallback=n}static tweetStatusToStatusData(e){const t=e.tweet.possiblySensitive&&!e.tweet.possiblySensitiveEditable,n=e.user.possiblySensitive?"accountIsShadowbannedOrFlaggedAsSensitive":"accountIsNotFlaggedAsSensitive",s=e.user.sensitiveMediaInProfile?"profileContainsSensitiveMedia":"profileDoesNotContainSensitiveMedia",r=e.tweet.possiblySensitive?"tweetIsFlaggedAsSensitive":"tweetIsNotFlaggedAsSensitive",o=t?"tweetIsAgeRestricted":"tweetIsNotAgeRestricted",i=t||e.user.possiblySensitive?"tweetIsNotSearchable":e.tweet.possiblySensitive?"tweetMayNotBeSearchable":"tweetIsSearchable",a="tweetIsSearchable"===i;return{isTweetSearchable:a,messages:[n,s,r,o,i],shareText:`\n${e.user.possiblySensitive?"🚫Account is flagged as sensitive or shadowbanned":"✅No sensitive flag on account"}\n${e.user.sensitiveMediaInProfile?"🚫Sensitive flag on profile media":"✅No sensitive flag on profile media"}\n${e.tweet.possiblySensitive?"🚫Sensitive flag on tweet":"✅No sensitive flag on tweet"}\n${t?"🚫Age limit on tweet":"✅No age limit on tweet"}\n${a?"✅Tweet will appear in search results":"🚫Tweet may not appear in search results"}\n\nShadowban Scanner by ろぼいん\n${"ja"===navigator.language?"https://robot-inventor.github.io/shadowban-scanner/":"https://robot-inventor.github.io/shadowban-scanner/en/"}\n`.trim(),tweetPermalink:e.tweet.tweetPermalink}}getMenuBar(){const e=this.tweet.querySelector("div[role='group'][id]");if(!e)throw new Error("Failed to get menu bar of tweet");return e}run(){this.tweet.setAttribute(r.CHECKED_DATA_ATTRIBUTE,"true");const e=this.getMenuBar(),t=new i.TweetReactProps(this.tweet,this.getMenuBar()),n=t.get();if(!n.tweet.isTweetByCurrentUser&&!this.options.enableForOtherUsersTweets)return;const c=s.MessageSummary.fromTweetStatus(n),l=a.tweetStatusToStatusData(n),{isTweetSearchable:p}=l;p&&!this.options.showMessagesInUnproblematicTweets||new o.SbsMessageWrapper({details:l.messages,isAlert:!p,isExpanded:this.options.alwaysDetailedView,isFocalMode:t.isFocal,isNoteShown:this.options.showNotesInMessages,isTweetButtonShown:this.options.showTweetButton,notes:["falsePositivesAndFalseNegativesOccur","translatedByAI"],onRenderedCallback:this.onMessageCallback,sourceTweet:this.tweet,sourceTweetPermalink:l.tweetPermalink,summary:c,tweetText:l.shareText,type:"tweet"}).insertAdjacentElement(e,"beforebegin")}}t.TweetChecker=a},5651:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UserScriptBase=void 0,n(6962);const s=n(2983),r=n(8564),o=n(2238);t.UserScriptBase=class{constructor(e){const t=new s.Translator((t=>e[t].message),"https://abs-0.twimg.com/emoji/v2/svg/");new r.Core(o.DEFAULT_SETTINGS,(()=>{t.translateElements()}))}}},1320:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(5651),o=s(n(8352));new r.UserScriptBase(o.default)},4937:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.asyncQuerySelector=void 0,t.asyncQuerySelector=async(e,t=document)=>new Promise(((n,s)=>{const r=t.querySelector(e);if(r)return void n(r);let o=null;const i=new MutationObserver((()=>{const s=t.querySelector(e);s&&(i.disconnect(),o&&clearTimeout(o),n(s))}));o=setTimeout((()=>{i.disconnect(),s(new Error(`Failed to get ${e}`))}),500),i.observe(document.body,{attributes:!0,childList:!0,subtree:!0})}))},8352:e=>{e.exports=JSON.parse('{"manifest_description":{"message":"這是一個用於檢測Twitter的Shadowban的擴充功能。"},"accountShadowbanned":{"message":"這個使用者可能已經被進行了Shadowban，因此他的推文可能不會顯示在搜尋結果中。"},"accountShadowbannedAndTweetFlaggedAsSensitive":{"message":"這個使用者可能已經被進行了Shadowban，因此他的推文可能不會顯示在搜尋結果中。此外，該推文被標記為敏感內容。"},"accountAndTweetShadowbanned":{"message":"這則推文有年齡限制，未滿18歲的使用者或未登入的使用者將無法閱讀。此外，它可能不會出現在搜尋結果中。"},"tweetFlaggedAsSensitive":{"message":"這則推文已被標註為敏感內容，根據閱讀者的設定，可能不會在搜尋結果中顯示。"},"thisUserIsNotShadowbanned":{"message":"这个使用者没有被Shadowban。"},"thisUserIsShadowbanned":{"message":"這個使用者可能已經被進行了Shadowban，因此他的推文可能不會顯示在搜尋結果中。"},"tweetShadowbanned":{"message":"這則推文有年齡限制，未滿18歲的使用者或未登入的使用者將無法閱讀。此外，它可能不會出現在搜尋結果中。"},"tweetNoProblem":{"message":"這則推文並未發現任何問題。"},"accountIsNotFlaggedAsSensitive":{"message":"✅帳戶沒有敏感標誌。"},"accountIsShadowbannedOrFlaggedAsSensitive":{"message":"🚫帳戶可能被設有shadowban，或有敏感標誌。"},"profileDoesNotContainSensitiveMedia":{"message":"✅個人資料媒體未設定為敏感標記。"},"profileContainsSensitiveMedia":{"message":"🚫個人資料媒體已設定為敏感標記。"},"tweetIsNotFlaggedAsSensitive":{"message":"✅推文未添加敏感标志。"},"tweetIsFlaggedAsSensitive":{"message":"🚫推文已添加敏感标志。"},"tweetIsNotAgeRestricted":{"message":"✅這則推文無年齡限制。"},"tweetIsAgeRestricted":{"message":"🚫這則推文有年齡限制。"},"tweetIsSearchable":{"message":"✅推文會顯示在搜索結果中。"},"tweetMayNotBeSearchable":{"message":"⚠️根據使用者的設定，推文可能不會顯示在搜索結果中。"},"tweetIsNotSearchable":{"message":"🚫有可能推文不會在搜索結果中顯示。"},"falsePositivesAndFalseNegativesOccur":{"message":"Shadowban Scanner與其他相似的工具一樣，有可能產生偽陽性或偽陰性的情況。有關其運作方式的詳細信息，請參考<a href=\\"https://github.com/Robot-Inventor/shadowban-scanner/blob/main/doc/en/about-shadowban.md\\" target=\\"blank\\">這裡</a>。"},"translatedByAI":{"message":"這段文字由AI翻譯自日語成繁體中文。如有任何不自然之處，請通知<a href=\\"https://twitter.com/keita_roboin\\" target=\\"_blank\\">@keita_roboin</a>的DM或<a href=\\"https://github.com/Robot-Inventor/shadowban-scanner/\\" target=\\"_blank\\">GitHub存儲庫</a>。","description":"This field is used if the translation was done by AI. Otherwise, set this field to an empty string. Example sentence: \\"Translated from Japanese to <language name> by AI. Please notify <a href=\\"https://twitter.com/keita_roboin\\" target=\\"_blank\\">@keita_roboin</a>\'s DM or <a href=\\"https://github.com/Robot-Inventor/shadowban-scanner/\\" target=\\"_blank\\">GitHub repository</a> if there are any unnatural points.\\""},"showMore":{"message":"▶顯示更多"},"tweetTheResults":{"message":"發推特結果"},"settingsWhereToDisplayCheckResults":{"message":"顯示檢查結果的位置"},"settingsShowMessagesInUnproblematicTweets":{"message":"在非問題推文中顯示"},"settingsShowMessagesInUnproblematicProfiles":{"message":"在非問題簡介中顯示"},"settingsEnableForOtherUsersTweets":{"message":"在其他用戶的推文中顯示"},"settingsEnableForOtherUsersProfiles":{"message":"在其他使用者的簡介中顯示"},"settingsOtherSettings":{"message":"其他設定"},"settingsAlwaysDetailedView":{"message":"始終顯示詳細資訊"},"settingsShowNotesInMessages":{"message":"在訊息底部顯示註釋"},"settingsShowTweetButton":{"message":"顯示按鈕以發推特結果"},"settingsPleaseReload":{"message":"若更改設定，請重新載入 Twitter"},"settingsPrivacyPolicy":{"message":"Privacy policy"},"settingsPrivacyPolicyURL":{"message":"https://github.com/Robot-Inventor/shadowban-scanner/blob/main/README_zh_tw.md#privacy-policy"},"settingsOpenSourceLicenses":{"message":"Open source licenses"},"privacyPolicyPageTitle":{"message":"Privacy Policy - Shadowban Scanner"},"privacyPolicy":{"message":"Privacy Policy"},"privacyPolicyText":{"message":"As a rule, this extension performs all processing on the user\'s computer. No data is transmitted to an external server. It also does not access Twitter\'s internal API by obtaining the user\'s credentials without permission, as is the case with some extensions. Web pages not bundled in this extension are subject to their own terms of use and privacy policies."}}')}},t={};function n(s){var r=t[s];if(void 0!==r)return r.exports;var o=t[s]={id:s,exports:{}};return e[s].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nc=void 0,n(1320)})();