// ==UserScript==
// @name         Shadowban Scanner (English)
// @namespace    https://github.com/Robot-Inventor/shadowban-scanner/
// @version      2.2.0
// @description  A browser extension that detects shadowbans on Twitter.
// @author       Robot-Inventor (ろぼいん / @keita_roboin)
// @match        https://twitter.com/*
// @match        https://mobile.twitter.com/*
// @match        https://tweetdeck.twitter.com/*
// @icon         https://raw.githubusercontent.com/Robot-Inventor/shadowban-scanner/main/src/image/icon128.png
// @downloadURL  https://raw.githubusercontent.com/Robot-Inventor/shadowban-scanner/main/userScript/en.user.js
// @updateURL    https://raw.githubusercontent.com/Robot-Inventor/shadowban-scanner/main/userScript/en.user.js
// @grant        none
// ==/UserScript==

(()=>{"use strict";var e={1402:(e,t,s)=>{s.d(t,{Z:()=>a});var n=s(8081),r=s.n(n),o=s(3645),i=s.n(o)()(r());i.push([e.id,".shadowban-scanner-message {\n    --message-background-color: rgb(255, 0, 0, 0.2);\n\n    padding: 1em;\n    border-radius: 0.5em;\n    background: var(--message-background-color);\n    margin: 1em 0 0 0;\n    font-family: sans-serif;\n}\n\n.shadowban-scanner-message.focal-mode {\n    margin: 0 0 1em 0;\n}\n\n.shadowban-scanner-message .twemoji {\n    height: 1em;\n    width: 1em;\n    margin-right: 0.25em;\n    vertical-align: middle;\n}\n\n.shadowban-scanner-message-no-problem {\n    --message-background-color: rgb(0, 255, 0, 0.2);\n}\n\n.shadowban-scanner-message button {\n    cursor: pointer;\n    color: inherit;\n    border: none;\n    background: none;\n}\n\n.shadowban-scanner-message .shadowban-scanner-collapsed-content {\n    display: none;\n}\n\n.shadowban-scanner-message ul {\n    font-family: inherit;\n    line-height: inherit;\n    margin: 0.75rem 0 0 0;\n    padding: 0;\n}\n\n.shadowban-scanner-message ul li {\n    list-style: none;\n}\n\n.shadowban-scanner-message-note {\n    opacity: 0.8;\n    font-size: 0.8em;\n    margin-top: 0.75em;\n}\n\n.shadowban-scanner-message-note + .shadowban-scanner-message-note {\n    margin-top: 0.5em;\n}\n\n.shadowban-scanner-message-note a {\n    color: inherit;\n}\n\n.shadowban-scanner-message md-filled-button {\n    margin-top: 0.5em;\n    width: 100%;\n    --md-filled-button-container-color: var(--message-background-color);\n    --md-ripple-hover-color: white;\n    --md-ripple-pressed-color: white;\n    --_container-shadow-color: rgba(0, 0, 0, 0.3);\n}\n\n[data-sb-translation] {\n    display: inline-block;\n    min-width: 15em;\n    min-height: 1em;\n    border-radius: 0.25em;\n    background-image: linear-gradient(90deg, transparent 40%, rgba(175, 175, 175, 0.7) 80%, transparent 100%);\n    background-size: 200% 100%;\n    animation: loading-animation 1.5s linear infinite;\n}\n\n@keyframes loading-animation {\n    0% {\n        background-position: 200% 0%;\n        opacity: 1;\n    }\n    100% {\n        background-position: 0% 0%;\n        opacity: 1;\n    }\n}\n",""]);const a=i},3645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s="",n=void 0!==t[5];return t[4]&&(s+="@supports (".concat(t[4],") {")),t[2]&&(s+="@media ".concat(t[2]," {")),n&&(s+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),s+=e(t),n&&(s+="}"),t[2]&&(s+="}"),t[4]&&(s+="}"),s})).join("")},t.i=function(e,s,n,r,o){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(n)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(i[l]=!0)}for(var c=0;c<e.length;c++){var p=[].concat(e[c]);n&&i[p[0]]||(void 0!==o&&(void 0===p[5]||(p[1]="@layer".concat(p[5].length>0?" ".concat(p[5]):""," {").concat(p[1],"}")),p[5]=o),s&&(p[2]?(p[1]="@media ".concat(p[2]," {").concat(p[1],"}"),p[2]=s):p[2]=s),r&&(p[4]?(p[1]="@supports (".concat(p[4],") {").concat(p[1],"}"),p[4]=r):p[4]="".concat(r)),t.push(p))}},t}},8081:e=>{e.exports=function(e){return e[1]}},6962:(e,t,s)=>{s.r(t),s.d(t,{default:()=>b});var n=s(3379),r=s.n(n),o=s(7795),i=s.n(o),a=s(569),l=s.n(a),c=s(3565),p=s.n(c),d=s(9216),h=s.n(d),u=s(4589),m=s.n(u),w=s(1402),f={};f.styleTagTransform=m(),f.setAttributes=p(),f.insert=l().bind(null,"head"),f.domAPI=i(),f.insertStyleElement=h(),r()(w.Z,f);const b=w.Z&&w.Z.locals?w.Z.locals:void 0},3379:e=>{var t=[];function s(e){for(var s=-1,n=0;n<t.length;n++)if(t[n].identifier===e){s=n;break}return s}function n(e,n){for(var o={},i=[],a=0;a<e.length;a++){var l=e[a],c=n.base?l[0]+n.base:l[0],p=o[c]||0,d="".concat(c," ").concat(p);o[c]=p+1;var h=s(d),u={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(u);else{var m=r(u,n);n.byIndex=a,t.splice(a,0,{identifier:d,updater:m,references:1})}i.push(d)}return i}function r(e,t){var s=t.domAPI(t);return s.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;s.update(e=t)}else s.remove()}}e.exports=function(e,r){var o=n(e=e||[],r=r||{});return function(e){e=e||[];for(var i=0;i<o.length;i++){var a=s(o[i]);t[a].references--}for(var l=n(e,r),c=0;c<o.length;c++){var p=s(o[c]);0===t[p].references&&(t[p].updater(),t.splice(p,1))}o=l}}},569:e=>{var t={};e.exports=function(e,s){var n=function(e){if(void 0===t[e]){var s=document.querySelector(e);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}t[e]=s}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(s)}},9216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,s)=>{e.exports=function(e){var t=s.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(s){!function(e,t,s){var n="";s.supports&&(n+="@supports (".concat(s.supports,") {")),s.media&&(n+="@media ".concat(s.media," {"));var r=void 0!==s.layer;r&&(n+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),n+=s.css,r&&(n+="}"),s.media&&(n+="}"),s.supports&&(n+="}");var o=s.sourceMap;o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,s)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},8725:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isProfileReactPropsData=t.isFocalTweetOuterReactPropsData=t.isTweetOuterReactPropsData=t.isMenuBarReactPropsData=void 0,t.isMenuBarReactPropsData=function(e){const t=e;return(null!==t&&"object"==typeof t||"function"==typeof t)&&Array.isArray(t.children)&&(null!==t.children[1]&&"object"==typeof t.children[1]||"function"==typeof t.children[1])&&(null!==t.children[1].props&&"object"==typeof t.children[1].props||"function"==typeof t.children[1].props)&&(null!==t.children[1].props.retweetWithCommentLink&&"object"==typeof t.children[1].props.retweetWithCommentLink||"function"==typeof t.children[1].props.retweetWithCommentLink)&&(null!==t.children[1].props.retweetWithCommentLink.state&&"object"==typeof t.children[1].props.retweetWithCommentLink.state||"function"==typeof t.children[1].props.retweetWithCommentLink.state)&&(null!==t.children[1].props.retweetWithCommentLink.state.quotedStatus&&"object"==typeof t.children[1].props.retweetWithCommentLink.state.quotedStatus||"function"==typeof t.children[1].props.retweetWithCommentLink.state.quotedStatus)&&(void 0===t.children[1].props.retweetWithCommentLink.state.quotedStatus.possibly_sensitive||null===t.children[1].props.retweetWithCommentLink.state.quotedStatus.possibly_sensitive||!1===t.children[1].props.retweetWithCommentLink.state.quotedStatus.possibly_sensitive||!0===t.children[1].props.retweetWithCommentLink.state.quotedStatus.possibly_sensitive)&&(void 0===t.children[1].props.retweetWithCommentLink.state.quotedStatus.possibly_sensitive_editable||null===t.children[1].props.retweetWithCommentLink.state.quotedStatus.possibly_sensitive_editable||!1===t.children[1].props.retweetWithCommentLink.state.quotedStatus.possibly_sensitive_editable||!0===t.children[1].props.retweetWithCommentLink.state.quotedStatus.possibly_sensitive_editable)&&"string"==typeof t.children[1].props.retweetWithCommentLink.state.quotedStatus.permalink&&(null!==t.children[1].props.retweetWithCommentLink.state.quotedStatus.user&&"object"==typeof t.children[1].props.retweetWithCommentLink.state.quotedStatus.user||"function"==typeof t.children[1].props.retweetWithCommentLink.state.quotedStatus.user)&&(void 0===t.children[1].props.retweetWithCommentLink.state.quotedStatus.user.possibly_sensitive||null===t.children[1].props.retweetWithCommentLink.state.quotedStatus.user.possibly_sensitive||!1===t.children[1].props.retweetWithCommentLink.state.quotedStatus.user.possibly_sensitive||!0===t.children[1].props.retweetWithCommentLink.state.quotedStatus.user.possibly_sensitive)&&"string"==typeof t.children[1].props.retweetWithCommentLink.state.quotedStatus.user.screen_name&&(""===t.children[1].props.retweetWithCommentLink.state.quotedStatus.user.profile_interstitial_type||"sensitive_media"===t.children[1].props.retweetWithCommentLink.state.quotedStatus.user.profile_interstitial_type||"fake_account"===t.children[1].props.retweetWithCommentLink.state.quotedStatus.user.profile_interstitial_type||"offensive_profile_content"===t.children[1].props.retweetWithCommentLink.state.quotedStatus.user.profile_interstitial_type||"timeout"===t.children[1].props.retweetWithCommentLink.state.quotedStatus.user.profile_interstitial_type)},t.isTweetOuterReactPropsData=function(e){const t=e;return(null!==t&&"object"==typeof t||"function"==typeof t)&&Array.isArray(t.children)&&Array.isArray(t.children[0])&&(null!==t.children[0][1]&&"object"==typeof t.children[0][1]||"function"==typeof t.children[0][1])&&(null!==t.children[0][1].props&&"object"==typeof t.children[0][1].props||"function"==typeof t.children[0][1].props)&&Array.isArray(t.children[0][1].props.children)&&(null!==t.children[0][1].props.children[0]&&"object"==typeof t.children[0][1].props.children[0]||"function"==typeof t.children[0][1].props.children[0])&&(null!==t.children[0][1].props.children[0].props&&"object"==typeof t.children[0][1].props.children[0].props||"function"==typeof t.children[0][1].props.children[0].props)&&Array.isArray(t.children[0][1].props.children[0].props.children)&&(null!==t.children[0][1].props.children[0].props.children[1]&&"object"==typeof t.children[0][1].props.children[0].props.children[1]||"function"==typeof t.children[0][1].props.children[0].props.children[1])&&(null!==t.children[0][1].props.children[0].props.children[1].props&&"object"==typeof t.children[0][1].props.children[0].props.children[1].props||"function"==typeof t.children[0][1].props.children[0].props.children[1].props)&&Array.isArray(t.children[0][1].props.children[0].props.children[1].props.children)&&Array.isArray(t.children[0][1].props.children[0].props.children[1].props.children[1])&&(null!==t.children[0][1].props.children[0].props.children[1].props.children[1][2]&&"object"==typeof t.children[0][1].props.children[0].props.children[1].props.children[1][2]||"function"==typeof t.children[0][1].props.children[0].props.children[1].props.children[1][2])&&(null!==t.children[0][1].props.children[0].props.children[1].props.children[1][2].props&&"object"==typeof t.children[0][1].props.children[0].props.children[1].props.children[1][2].props||"function"==typeof t.children[0][1].props.children[0].props.children[1].props.children[1][2].props)&&(null!==t.children[0][1].props.children[0].props.children[1].props.children[1][2].props.loggedInUser&&"object"==typeof t.children[0][1].props.children[0].props.children[1].props.children[1][2].props.loggedInUser||"function"==typeof t.children[0][1].props.children[0].props.children[1].props.children[1][2].props.loggedInUser)&&"string"==typeof t.children[0][1].props.children[0].props.children[1].props.children[1][2].props.loggedInUser.screen_name},t.isFocalTweetOuterReactPropsData=function(e){const t=e;return(null!==t&&"object"==typeof t||"function"==typeof t)&&Array.isArray(t.children)&&Array.isArray(t.children[0])&&(null!==t.children[0][1]&&"object"==typeof t.children[0][1]||"function"==typeof t.children[0][1])&&(null!==t.children[0][1].props&&"object"==typeof t.children[0][1].props||"function"==typeof t.children[0][1].props)&&Array.isArray(t.children[0][1].props.children)&&(null!==t.children[0][1].props.children[0]&&"object"==typeof t.children[0][1].props.children[0]||"function"==typeof t.children[0][1].props.children[0])&&(null!==t.children[0][1].props.children[0].props&&"object"==typeof t.children[0][1].props.children[0].props||"function"==typeof t.children[0][1].props.children[0].props)&&Array.isArray(t.children[0][1].props.children[0].props.children)&&(null!==t.children[0][1].props.children[0].props.children[2]&&"object"==typeof t.children[0][1].props.children[0].props.children[2]||"function"==typeof t.children[0][1].props.children[0].props.children[2])&&(null!==t.children[0][1].props.children[0].props.children[2].props&&"object"==typeof t.children[0][1].props.children[0].props.children[2].props||"function"==typeof t.children[0][1].props.children[0].props.children[2].props)&&Array.isArray(t.children[0][1].props.children[0].props.children[2].props.children)&&(null!==t.children[0][1].props.children[0].props.children[2].props.children[7]&&"object"==typeof t.children[0][1].props.children[0].props.children[2].props.children[7]||"function"==typeof t.children[0][1].props.children[0].props.children[2].props.children[7])&&(null!==t.children[0][1].props.children[0].props.children[2].props.children[7].props&&"object"==typeof t.children[0][1].props.children[0].props.children[2].props.children[7].props||"function"==typeof t.children[0][1].props.children[0].props.children[2].props.children[7].props)&&(null!==t.children[0][1].props.children[0].props.children[2].props.children[7].props.loggedInUser&&"object"==typeof t.children[0][1].props.children[0].props.children[2].props.children[7].props.loggedInUser||"function"==typeof t.children[0][1].props.children[0].props.children[2].props.children[7].props.loggedInUser)&&"string"==typeof t.children[0][1].props.children[0].props.children[2].props.children[7].props.loggedInUser.screen_name},t.isProfileReactPropsData=function(e){const t=e;return(null!==t&&"object"==typeof t||"function"==typeof t)&&Array.isArray(t.children)&&(null!==t.children[1]&&"object"==typeof t.children[1]||"function"==typeof t.children[1])&&(null!==t.children[1].props&&"object"==typeof t.children[1].props||"function"==typeof t.children[1].props)&&(null!==t.children[1].props.user&&"object"==typeof t.children[1].props.user||"function"==typeof t.children[1].props.user)&&(null===t.children[1].props.user.possibly_sensitive||!1===t.children[1].props.user.possibly_sensitive||!0===t.children[1].props.user.possibly_sensitive)&&(""===t.children[1].props.user.profile_interstitial_type||"sensitive_media"===t.children[1].props.user.profile_interstitial_type||"fake_account"===t.children[1].props.user.profile_interstitial_type||"offensive_profile_content"===t.children[1].props.user.profile_interstitial_type||"timeout"===t.children[1].props.user.profile_interstitial_type)}},3216:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RELEASE_NOTE_URL=t.ONBOARDING_URL=t.ALLOWED_TWEMOJI=t.TWEMOJI_ATTRIBUTE=t.SHADOW_TRANSLATION_ATTRIBUTE=t.TRANSLATION_ATTRIBUTE=t.COLLAPSED_CONTENT_CLASS_NAME=t.EVENT_GENERATOR_SETTINGS_ATTRIBUTE=t.EVENT_GENERATOR_ID=t.CHECKED_DATA_ATTRIBUTE=void 0,t.CHECKED_DATA_ATTRIBUTE="data-shadowban-checked",t.EVENT_GENERATOR_ID="shadowban-scanner-event-generator",t.EVENT_GENERATOR_SETTINGS_ATTRIBUTE="data-sb-settings",t.COLLAPSED_CONTENT_CLASS_NAME="shadowban-scanner-collapsed-content",t.TRANSLATION_ATTRIBUTE="data-sb-translation",t.SHADOW_TRANSLATION_ATTRIBUTE="data-sb-shadow-translation",t.TWEMOJI_ATTRIBUTE="data-sb-enable-twemoji",t.ALLOWED_TWEMOJI=["✅","🚫","⚠️"],t.ONBOARDING_URL={en:"https://github.com/Robot-Inventor/shadowban-scanner/blob/main/README.md",ja:"https://github.com/Robot-Inventor/shadowban-scanner/blob/main/README_ja.md"},t.RELEASE_NOTE_URL={en:"https://robot-inventor.github.io/article/2023/11/10/shadowban-scanner-v2-2-release/en/",ja:"https://robot-inventor.github.io/article/2023/11/10/shadowban-scanner-v2-2-release/"}},2238:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_SETTINGS=void 0,t.DEFAULT_SETTINGS={alwaysDetailedView:!1,enableForOtherUsersProfiles:!0,enableForOtherUsersTweets:!0,showMessagesInUnproblematicProfiles:!0,showMessagesInUnproblematicTweets:!1,showNotesInMessages:!0,showTweetButton:!0}},2983:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Translator=void 0;const n=s(3216);t.Translator=class{constructor(e,t){this.translationFunction=e,this.twemojiEndpoint=t}convertEmojiToTwemoji(e){let t=e;for(const e of n.ALLOWED_TWEMOJI){const s=[...e].map((e=>e.codePointAt(0)?.toString(16))).join("-"),n=`<img src="${new URL(`${s}.svg`,this.twemojiEndpoint).href}" alt="${e}" class="twemoji">`;t=t.replaceAll(e,n)}return t}translateElements(){const e=[...document.querySelectorAll(`[${n.TRANSLATION_ATTRIBUTE}]`)],t=document.querySelectorAll(`sbs-message[${n.SHADOW_TRANSLATION_ATTRIBUTE}]`);for(const s of t){const{shadowRoot:t}=s;if(!t)return;const r=t.querySelectorAll(`[${n.TRANSLATION_ATTRIBUTE}]`);e.push(...r),r.length&&s.removeAttribute(n.SHADOW_TRANSLATION_ATTRIBUTE)}e.forEach((e=>{const t=e.getAttribute(n.TRANSLATION_ATTRIBUTE),s=this.translationFunction(t);e.hasAttribute(n.TWEMOJI_ATTRIBUTE)?e.innerHTML=this.convertEmojiToTwemoji(s):e.innerHTML=s,e.removeAttribute(n.TRANSLATION_ATTRIBUTE)}))}}},8564:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Core=void 0;const n=s(3216),r=s(1186),o=s(4338);t.Core=class{constructor(e,t){this.OBSERVER_OPTIONS={childList:!0,subtree:!0},this.settings=e,this.onMessageCallback=t;const s=new MutationObserver((()=>{this.timelineObserverCallback()})),n=new MutationObserver((()=>{const e=document.querySelector("main");e&&(n.disconnect(),s.observe(e,this.OBSERVER_OPTIONS))}));n.observe(document.body,this.OBSERVER_OPTIONS)}timelineObserverCallback(){const e=document.querySelectorAll(`[data-testid="tweet"]:not([${n.CHECKED_DATA_ATTRIBUTE}]`);for(const t of e)new o.TweetChecker(t,this.settings,this.onMessageCallback).run();const t=document.querySelector(`:not([data-testid="tweet"]) [data-testid="UserName"]:not([${n.CHECKED_DATA_ATTRIBUTE}])`);t&&new r.ProfileChecker(t,this.settings,this.onMessageCallback).run()}}},5629:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MessageSummary=void 0,t.MessageSummary=class{static fromTweetStatus(e){return e.user.possiblySensitive||e.user.sensitiveMediaInProfile||e.tweet.possiblySensitive?e.user.possiblySensitive||e.user.sensitiveMediaInProfile?e.tweet.possiblySensitive?e.tweet.possiblySensitiveEditable?"accountShadowbannedAndTweetFlaggedAsSensitive":"accountAndTweetShadowbanned":"accountShadowbanned":e.tweet.possiblySensitiveEditable?"tweetFlaggedAsSensitive":"tweetShadowbanned":"tweetNoProblem"}static fromAccountStatus(e){return e?"thisUserIsShadowbanned":"thisUserIsNotShadowbanned"}}},1186:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProfileChecker=void 0;const n=s(3216),r=s(5629),o=s(1194),i=s(3736);t.ProfileChecker=class{constructor(e,t,s){this.userName=e,this.options=t,this.onMessageCallback=s}run(){const e=Boolean(document.querySelector("[data-testid='editProfileButton']"));if(!this.options.enableForOtherUsersProfiles&&!e)return;this.userName.setAttribute(n.CHECKED_DATA_ATTRIBUTE,"true");const t=new o.ProfileReactProps(this.userName).get(),s=Boolean(t.user.possibly_sensitive)||Boolean(["sensitive_media","offensive_profile_content"].includes(t.user.profile_interstitial_type));if(!s&&!this.options.showMessagesInUnproblematicProfiles)return;const a=new i.SbsMessageWrapper({isAlert:s,onRenderedCallback:this.onMessageCallback,summary:r.MessageSummary.fromAccountStatus(s),type:"profile"}),l=document.querySelector("[data-testid='UserDescription']")||document.querySelector("[data-testid='UserName']");if(!l)throw new Error("Failed to get user description of profile");a.insertAdjacentElement(l,"afterend")}}},1194:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProfileReactProps=void 0;const n=s(7036),r=s(8725);t.ProfileReactProps=class{constructor(e){this.userName=e}get(){const e=new n.ReactProps(this.userName).get();if(!(0,r.isProfileReactPropsData)(e))throw new Error("Type of reactProps is invalid.");return e.children[1].props}}},7036:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ReactProps=void 0,t.ReactProps=class{constructor(e){this.element=e,[this.reactPropsName]=Object.getOwnPropertyNames(e).filter((e=>e.startsWith("__reactProps$")))}get(){return this.element[this.reactPropsName]}}},2878:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TweetReactProps=void 0;const n=s(8725),r=s(7036);t.TweetReactProps=class{constructor(e,t){this.tweet=e;const s=new r.ReactProps(t).get();if(!(0,n.isMenuBarReactPropsData)(s))throw new Error("Type of basicTweetProps is invalid.");this.basicTweetProps=s.children[1].props.retweetWithCommentLink.state.quotedStatus}get(){const e=this.basicTweetProps;return{tweet:{isTweetByCurrentUser:this.isTweetByCurrentUser,possiblySensitive:Boolean(e.possibly_sensitive),possiblySensitiveEditable:!(!1===e.possibly_sensitive_editable),tweetPermalink:e.permalink},user:{possiblySensitive:Boolean(e.user.possibly_sensitive),sensitiveMediaInProfile:["sensitive_media","offensive_profile_content"].includes(e.user.profile_interstitial_type)}}}get isTweetByCurrentUser(){const e=this.basicTweetProps.user.screen_name,t=new r.ReactProps(this.tweet).get();let s="";if((0,n.isTweetOuterReactPropsData)(t))s=t.children[0][1].props.children[0].props.children[1].props.children[1][2].props.loggedInUser.screen_name;else{if(!(0,n.isFocalTweetOuterReactPropsData)(t))throw new Error("Type of tweetReactProps is invalid.");s=t.children[0][1].props.children[0].props.children[2].props.children[7].props.loggedInUser.screen_name}return e===s}get isFocal(){const e=new r.ReactProps(this.tweet).get();return(0,n.isFocalTweetOuterReactPropsData)(e)}}},3736:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SbsMessageWrapper=void 0;const n=s(3216),r=s(4937);class o{constructor(e){const t=document.createElement("sbs-message");t.summary=e.summary,t.isAlert=e.isAlert,t.onRenderedCallback=e.onRenderedCallback,"tweet"===e.type?(t.details=e.details,t.notes=e.notes,t.isFocalMode=e.isFocalMode,t.isExpanded=e.isExpanded,t.isTweetButtonShown=e.isTweetButtonShown,t.isNoteShown=e.isNoteShown,this.sourceTweet=e.sourceTweet,this.sourceTweetPermalink=e.sourceTweetPermalink,this.tweetText=e.tweetText):t.isExpanded=!0,t.setAttribute(n.SHADOW_TRANSLATION_ATTRIBUTE,""),t.addEventListener("tweetButtonClick",this.onTweetButtonClick.bind(this)),this.sbsMessage=t}static async clickRetweetButton(e){(await(0,r.asyncQuerySelector)("[data-testid='unretweet'], [data-testid='retweet']",e)).click()}static async clickQuoteButton(){(await(0,r.asyncQuerySelector)(["[data-testid='Dropdown'] [href='/compose/tweet']","[data-testid='sheetDialog'] [href='/compose/tweet']"].join(","))).click()}static async getTweetTextBox(){const e=await(0,r.asyncQuerySelector)("[data-viewportview='true'] [data-text='true'], textarea[data-testid='tweetTextarea_0']"),t="TEXTAREA"===e.tagName?e:e.parentElement;if(!t)throw new Error("Failed to get text box of tweet");return t}static async quoteTweet(e,t,s){try{await o.clickRetweetButton(e),await o.clickQuoteButton();const t=await o.getTweetTextBox();t.innerHTML=s,t.dispatchEvent(new Event("input",{bubbles:!0}))}catch(e){open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(`${s}\nhttps://twitter.com${t}`)}`,"_blank")}}onTweetButtonClick(){if(!this.sourceTweet||!this.sourceTweetPermalink||!this.tweetText)throw new Error("Tweet button clicked without source tweet");o.quoteTweet(this.sourceTweet,this.sourceTweetPermalink,this.tweetText)}insertAdjacentElement(e,t){e.insertAdjacentElement(t,this.sbsMessage)}}t.SbsMessageWrapper=o},4338:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TweetChecker=void 0;const n=s(5629),r=s(3216),o=s(3736),i=s(2878);class a{constructor(e,t,s){this.tweet=e,this.options=t,this.onMessageCallback=s}static tweetStatusToStatusData(e){const t=e.tweet.possiblySensitive&&!e.tweet.possiblySensitiveEditable,s=e.user.possiblySensitive?"accountIsShadowbannedOrFlaggedAsSensitive":"accountIsNotFlaggedAsSensitive",n=e.user.sensitiveMediaInProfile?"profileContainsSensitiveMedia":"profileDoesNotContainSensitiveMedia",r=e.tweet.possiblySensitive?"tweetIsFlaggedAsSensitive":"tweetIsNotFlaggedAsSensitive",o=t?"tweetIsAgeRestricted":"tweetIsNotAgeRestricted",i=t||e.user.possiblySensitive?"tweetIsNotSearchable":e.tweet.possiblySensitive?"tweetMayNotBeSearchable":"tweetIsSearchable",a="tweetIsSearchable"===i;return{isTweetSearchable:a,messages:[s,n,r,o,i],shareText:`\n${e.user.possiblySensitive?"🚫Account is flagged as sensitive or shadowbanned":"✅No sensitive flag on account"}\n${e.user.sensitiveMediaInProfile?"🚫Sensitive flag on profile media":"✅No sensitive flag on profile media"}\n${e.tweet.possiblySensitive?"🚫Sensitive flag on tweet":"✅No sensitive flag on tweet"}\n${t?"🚫Age limit on tweet":"✅No age limit on tweet"}\n${a?"✅Tweet will appear in search results":"🚫Tweet may not appear in search results"}\n\nShadowban Scanner by ろぼいん\n${"ja"===navigator.language?"https://robot-inventor.github.io/shadowban-scanner/":"https://robot-inventor.github.io/shadowban-scanner/en/"}\n`.trim(),tweetPermalink:e.tweet.tweetPermalink}}getMenuBar(){const e=this.tweet.querySelector("div[role='group'][id]");if(!e)throw new Error("Failed to get menu bar of tweet");return e}run(){this.tweet.setAttribute(r.CHECKED_DATA_ATTRIBUTE,"true");const e=this.getMenuBar(),t=new i.TweetReactProps(this.tweet,this.getMenuBar()),s=t.get();if(!s.tweet.isTweetByCurrentUser&&!this.options.enableForOtherUsersTweets)return;const l=n.MessageSummary.fromTweetStatus(s),c=a.tweetStatusToStatusData(s),{isTweetSearchable:p}=c;p&&!this.options.showMessagesInUnproblematicTweets||new o.SbsMessageWrapper({details:c.messages,isAlert:!p,isExpanded:this.options.alwaysDetailedView,isFocalMode:t.isFocal,isNoteShown:this.options.showNotesInMessages,isTweetButtonShown:this.options.showTweetButton,notes:["falsePositivesAndFalseNegativesOccur","translatedByAI"],onRenderedCallback:this.onMessageCallback,sourceTweet:this.tweet,sourceTweetPermalink:c.tweetPermalink,summary:l,tweetText:c.shareText,type:"tweet"}).insertAdjacentElement(e,"beforebegin")}}t.TweetChecker=a},798:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(5651),o=n(s(4533));new r.UserScriptBase(o.default)},5651:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UserScriptBase=void 0,s(6962);const n=s(2983),r=s(8564),o=s(2238);t.UserScriptBase=class{constructor(e){const t=new n.Translator((t=>e[t].message),"https://abs-0.twimg.com/emoji/v2/svg/");new r.Core(o.DEFAULT_SETTINGS,(()=>{t.translateElements()}))}}},4937:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.asyncQuerySelector=void 0,t.asyncQuerySelector=async(e,t=document)=>new Promise(((s,n)=>{const r=t.querySelector(e);if(r)return void s(r);let o=null;const i=new MutationObserver((()=>{const n=t.querySelector(e);n&&(i.disconnect(),o&&clearTimeout(o),s(n))}));o=setTimeout((()=>{i.disconnect(),n(new Error(`Failed to get ${e}`))}),500),i.observe(document.body,{attributes:!0,childList:!0,subtree:!0})}))},4533:e=>{e.exports=JSON.parse('{"manifest_description":{"message":"A browser extension that detects shadowbans on Twitter."},"accountShadowbanned":{"message":"This user may be shadowbanned, so this tweet may not appear in search results."},"accountShadowbannedAndTweetFlaggedAsSensitive":{"message":"This user may be shadowbanned so this tweet may not appear in search results. Also, this tweet is flagged as sensitive."},"accountAndTweetShadowbanned":{"message":"This tweet is age-restricted and cannot be viewed by users under the age of 18 or who are not logged in. This tweet may not appear in search results."},"tweetFlaggedAsSensitive":{"message":"This tweet is flagged as sensitive and will not appear in search results depending on the viewer\'s preferences."},"thisUserIsNotShadowbanned":{"message":"This user is not shadowbanned."},"thisUserIsShadowbanned":{"message":"This user may be shadowbanned and tweets may not appear in search results."},"tweetShadowbanned":{"message":"This tweet is age-restricted and cannot be viewed by users under the age of 18 or who are not logged in. This tweet may not appear in search results."},"tweetNoProblem":{"message":"No problems was found with this tweet."},"accountIsNotFlaggedAsSensitive":{"message":"✅Account is not flagged as sensitive."},"accountIsShadowbannedOrFlaggedAsSensitive":{"message":"🚫Account may be shadowbanned or flagged as sensitive."},"profileDoesNotContainSensitiveMedia":{"message":"✅Profile media is not flagged as sensitive."},"profileContainsSensitiveMedia":{"message":"🚫Profile media is flagged as sensitive."},"tweetIsNotFlaggedAsSensitive":{"message":"✅Tweet is not flagged as sensitive."},"tweetIsFlaggedAsSensitive":{"message":"🚫Tweet is flagged as sensitive."},"tweetIsNotAgeRestricted":{"message":"✅Tweet has no age limit."},"tweetIsAgeRestricted":{"message":"🚫Tweet has age limit."},"tweetIsSearchable":{"message":"✅Tweet will appear in search results."},"tweetMayNotBeSearchable":{"message":"⚠️Tweet may not appear in search results depending on viewer preferences."},"tweetIsNotSearchable":{"message":"🚫Tweet may not appear in search results."},"falsePositivesAndFalseNegativesOccur":{"message":"Shadowban Scanner, like other similar tools, can produce false positives and false negatives. For more information on how it works, please click <a href=\\"https://github.com/Robot-Inventor/shadowban-scanner/blob/main/doc/en/about-shadowban.md\\" target=\\"blank\\">here</a>."},"translatedByAI":{"message":"Translated from Japanese to English by AI. Please notify <a href=\\"https://twitter.com/keita_roboin\\" target=\\"_blank\\">@keita_roboin</a>\'s DM or <a href=\\"https://github.com/Robot-Inventor/shadowban-scanner/\\" target=\\"_blank\\">GitHub repository</a> if there are any unnatural points.","description":"This field is used if the translation was done by AI. Otherwise, set this field to an empty string. Example sentence: \\"Translated from Japanese to <language name> by AI. Please notify <a href=\\"https://twitter.com/keita_roboin\\" target=\\"_blank\\">@keita_roboin</a>\'s DM or <a href=\\"https://github.com/Robot-Inventor/shadowban-scanner/\\" target=\\"_blank\\">GitHub repository</a> if there are any unnatural points.\\""},"showMore":{"message":"▶show more"},"tweetTheResults":{"message":"Tweet the results"},"settingsWhereToDisplayCheckResults":{"message":"Where to display check results"},"settingsShowMessagesInUnproblematicTweets":{"message":"Display in non-problematic tweets"},"settingsShowMessagesInUnproblematicProfiles":{"message":"Display in non-problematic profiles"},"settingsEnableForOtherUsersTweets":{"message":"Display in other users\' tweets"},"settingsEnableForOtherUsersProfiles":{"message":"Display in other users\' profiles"},"settingsOtherSettings":{"message":"Other settings"},"settingsAlwaysDetailedView":{"message":"Always display detailed information"},"settingsShowNotesInMessages":{"message":"Display notes at the bottom of the message"},"settingsShowTweetButton":{"message":"Display buttons to tweet the results"},"settingsPleaseReload":{"message":"Please reload Twitter once you have changed the settings"},"settingsPrivacyPolicy":{"message":"Privacy policy"},"settingsPrivacyPolicyURL":{"message":"https://github.com/Robot-Inventor/shadowban-scanner#privacy-policy"},"settingsOpenSourceLicenses":{"message":"Open source licenses"},"privacyPolicyPageTitle":{"message":"Privacy Policy - Shadowban Scanner"},"privacyPolicy":{"message":"Privacy Policy"},"privacyPolicyText":{"message":"As a rule, this extension performs all processing on the user\'s computer. No data is transmitted to an external server. It also does not access Twitter\'s internal API by obtaining the user\'s credentials without permission, as is the case with some extensions. Web pages not bundled in this extension are subject to their own terms of use and privacy policies."}}')}},t={};function s(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={id:n,exports:{}};return e[n].call(o.exports,o,o.exports,s),o.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nc=void 0,s(798)})();